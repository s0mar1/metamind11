// backend/src/prompts/autoAnalysis/context.js

const autoAnalysisContext = ({ placement, lastRound, goldLeft, totalDamageToPlayers, userTraits, userUnits, otherParticipantsData, metaDataForAI }) => `
MetaMind의 실시간 챌린저 통계 데이터를 기반으로 플레이어의 게임을 분석합니다.
**플레이어의 게임 기록과 다른 플레이어들의 덱 정보를 면밀히 검토하고,
[현재 챌린저 메타 주요 덱 정보]를 바탕으로 플레이어에게 가장 적합한 전략적 피드백을 제공해주세요.**
**모든 챌린저 덱은 기본적으로 강력하다는 전제 하에, 플레이어가 현재 메타에서 어떤 잠재력을 더 발휘할 수 있었는지에 집중합니다.**

**[분석 피드백의 구체적인 근거 및 기준]**
- **덱 분석 (유사성 기반):**
  - **제공된 [현재 챌린저 메타 주요 덱 정보]와 플레이어의 최종 덱 간의 '유사성'을 최우선으로 고려합니다.**
  - 플레이어의 덱과 가장 유사한 메타 덱을 찾아 그 덱의 방향성을 기반으로 피드백을 제공합니다.
  - **"이런 기물을 활용하는 것이 통계상으로는 더 좋습니다"**와 같이, 플레이어가 선택한 덱과 **비슷한 계열의 덱에서 통계적으로 더 좋은 효율을 보이는 유닛, 특성, 아이템 조합의 방향성**을 제시해주세요.
  - **전혀 다른 1티어 덱을 무작정 추천하는 것은 지양합니다.**
  - **모든 챌린저 메타 덱은 통계적 티어가 낮더라도 강력한 잠재력을 가집니다.** 단순히 티어가 낮다고 나쁜 덱이라는 판단은 하지 않습니다.

- **아이템 조합/선택 및 기물 선택:**
  - **[현재 챌린저 메타 주요 덱 정보]를 기반으로 아이템의 효율적인 조합 및 기물 선택에 대한 판단을 내립니다.**
  - 플레이어의 아이템 조합이 메타 덱의 **추천 아이템과 핵심 캐리 유닛의 역할**에 얼마나 일치하는지, 또는 어떤 대안이 있었는지를 구체적으로 분석합니다.
  - **제시된 아이템 이름과 실제 아이템 효과를 명확히 연결하여 분석합니다.** (예: '스트라이커의 채찍' -> '타격대의 철퇴'와 같은 오인 없도록 주의)
  - 3성작 판단 (예: 8레벨에 9개의 기물이 모두 1성인 경우):
    - **플레이어가 9레벨을 달성했음에도 불구하고 대부분의 기물이 1성이라면, 8레벨에서 주요 캐리 기물의 2성작 또는 핵심 3성작을 마친 후 9레벨을 가는 것이 통계적으로 더 유리했다는 방향으로 조언할 수 있습니다.**
    - "남은 골드를 바탕으로 판단했을 때, 9레벨을 달성하는 대신 8레벨에서 리롤을 통해 핵심 기물의 2성작/3성작을 마무리하는 것이 더 안정적인 플레이였을 수 있습니다."와 같이 구체적인 대안을 제시합니다.

[사용자의 게임 기록]
- 최종 등수: ${placement}등
- 최종 라운드: ${lastRound}
- 남은 골드: ${goldLeft}골드
- 플레이어에게 가한 총 피해량: ${totalDamageToPlayers}
- 활성화된 특성: ${userTraits}
- 최종 배치 유닛 및 아이템:
${userUnits}

${otherParticipantsData}

${metaDataForAI}
`;

export default autoAnalysisContext;